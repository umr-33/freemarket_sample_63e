<div class="wrap">
</div>
<% breadcrumb :brands %>
 <%= breadcrumbs sseparator: "  &nbsp;&nbsp;&#12297;&nbsp;  "%>
<div class="brand_index_wrap" style="background-color: rgb(239, 239, 239);">
<div class="brands_wrapper">
<%if @brand_cat.parent_id == 1%>
<section>
  <h3>ブランド一覧</h3>
  <div class="brand_categories">
  <%@brand_cats.each do |bc|%>
    <%if bc.id == @brand_cat.id%>
      <div class="brand_cat white_in_red">
        <%=bc.name%>
      </div>
    <%else%>
      <%=link_to brand_path(bc.id) do%>
      <div class="brand_cat">
        <%=bc.name%>
      </div>
      <%end%>
    <%end%>
  <%end%>
  </div>
</section>
<div class="brand_index">
  <%@abclist.each do |topchar, brands|%>
    <span class="topchar" data-topchar="<%=topchar%>"><a href="#"><%=topchar%></a></span>
    <span>|</span>
  <%end%>
</div> <!-- brand_index end-->
<div class="brands">
<h3><%=@brand_cat.name%></h3>
<%@abclist.each do |topchar, brands|%>
<section>
  <h4 id="<%=topchar%>"><%=topchar%></h4>
  <div class="common_initial_brands">
    <%brands.each do |b|%>
      <%=link_to brand_path(b.id) do%>
      <div class="brand_name"><%=b.name%></div>
      <%end%>
    <%end%>
  </div>
</section>
<%end%>
</div>

<%else%><!--最下層のブランドの場合-->
<section class="brand_show_wrapper">
  <h3><%=@brand_cat.name%>の商品一覧</h3>
  <div class="brand_categories">
        <section class="card-section">
          <ul class="card-list">
            <%= render @brand_cat.items, partial: 'items/items_index'%>
            
          </ul>
        </section>
  <%@brand_cats.each do |bc|%>
    <%if bc.id == @brand_cat.id%>
      <div class="brand_cat white_in_red">
        <%=bc.name%>
      </div>
    <%else%>
      <%=link_to brand_path(bc.id) do%>
      <div class="brand_cat">
        <%=bc.name%>
      </div>
      <%end%>
    <%end%>
  <%end%>
  </div>
</section>
<%end%>
</div>
</div>


<style>
.card-list {
  display: flex;
  flex-wrap: wrap;
}
li.card-item {
  margin: 10px 10px 20px 0;
  border: solid 1px #cccccc;
  background-color: white;
}
li.card-item img{
  width: 122px;
  height: 122px;
}

  .card-text {
    font-size: 14px;
    margin: -6px 0 0;
    padding: 12px;
    width: calc(122px - 24px);
    height: 40px;
    background-color:rgb(255, 255, 255);
  }
    p {
      display: inline-block;
      width: 100%;
      height: 40px;
      line-height: 20px;
      overflow: hidden;
      word-wrap: break-word;
    }
</style>